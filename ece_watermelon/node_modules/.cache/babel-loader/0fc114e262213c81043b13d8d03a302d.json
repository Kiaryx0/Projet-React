{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\Projet-React\\\\ece_watermelon\\\\src\\\\Components\\\\Forms\\\\RegisterForm.js\";\nimport React from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport { MDBCard, MDBCardBody, MDBContainer, MDBAlert, MDBInput, MDBBtn, MDBIcon, MDBMask, MDBView } from 'mdbreact';\nimport Stepper from 'react-stepper-horizontal';\nimport background from '../../Pictures/forms_background.jpg';\nimport loginUser from '../../Database/DatabaseSession.js';\n\nclass RegisterForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRadioBtn = argCard => () => {\n      this.setState({\n        inputCardType: argCard\n      });\n    };\n\n    this.state = {\n      currentStep: 0,\n      steps: [{\n        title: 'Personal Informations',\n        onClick: () => {\n          this.handleStepperClick(0);\n        }\n      }, {\n        title: 'Payment Infos',\n        onClick: () => {\n          this.handleStepperClick(1);\n        }\n      }],\n      inputEmail: \"\",\n      inputPassword: \"\",\n      inputFirstName: \"\",\n      inputLastName: \"\",\n      inputCardType: \"\",\n      inputCVC: \"\",\n      inputExpirationDate: \"\",\n      redirect: false,\n      alert_invisible: true\n    };\n    this.handleNextBtn = this.handleNextBtn.bind(this);\n    this.handlePrvsBtn = this.handlePrvsBtn.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleRadioBtn = this.handleRadioBtn.bind(this);\n  }\n\n  handleNextBtn() {\n    this.setState({\n      currentStep: this.state.currentStep + 1\n    });\n  }\n\n  handlePrvsBtn() {\n    this.setState({\n      currentStep: this.state.currentStep - 1\n    });\n  }\n  /**\r\n   * retrieve users input in form\r\n   */\n\n\n  handleInputChange(event) {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleStepperClick(stepClick) {\n    this.setState({\n      currentStep: stepClick\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.inputCVC.length === 4 && this.state.inputEmail.match(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\n      console.log(this.state.inputCVC + \"\" + this.state.inputExpirationDate + \"\" + this.state.inputLastName + \"\" + this.state.inputCardType);\n      let users = JSON.parse(localStorage.getItem(\"users\"));\n      let cards = JSON.parse(localStorage.getItem(\"cards\"));\n      let newIdUser = users.length + 1;\n      let newIdCard = cards.length + 1;\n      users.push({\n        id: newIdUser,\n        first_name: this.state.inputFirstName,\n        last_name: this.state.inputLastName,\n        email: this.state.inputEmail,\n        password: this.state.inputPassword,\n        isAdmin: false\n      });\n      localStorage.setItem(\"users\", JSON.stringify(users));\n      cards.push({\n        id: newIdCard,\n        last_4: this.state.inputCVC,\n        brand: this.state.inputCardType,\n        expired_at: this.state.inputExpirationDate + \"-01\",\n        user_id: newIdUser\n      });\n      localStorage.setItem(\"cards\", JSON.stringify(cards));\n      loginUser(this.state.inputEmail, this.state.inputPassword);\n      this.setState({\n        redirect: true\n      });\n    } else {\n      this.setState({\n        alert_invisible: false\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(MDBView, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: background,\n      alt: \"\",\n      style: {\n        backgroundRepeat: \"cover\",\n        width: \"100vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(MDBMask, {\n      overlay: \"black-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      className: \"d-flex flex-column align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.alert_invisible ? React.createElement(\"div\", {\n      className: \"invisible\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      className: \"visible mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(MDBAlert, {\n      color: \"danger\",\n      dismiss: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"There are some errors in your sign up form!\")), React.createElement(MDBCard, {\n      className: \"mt-3\",\n      style: {\n        backgroundColor: \"rgba(150,150,150,0.3)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(MDBCardBody, {\n      className: \"white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"white-text\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h3 text-center mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Sign up\"), React.createElement(\"hr\", {\n      className: \"hr-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Stepper, {\n      steps: this.state.steps,\n      activeStep: this.state.currentStep,\n      defaultTitleColor: \"ffffff\",\n      activeTitleColor: \"#5096FF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), this.state.currentStep === 0 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(MDBInput, {\n      required: true,\n      name: \"inputEmail\",\n      className: \"white-text\",\n      value: this.state.inputEmail,\n      label: \"Your email\",\n      type: \"email\",\n      icon: \"envelope\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      required: true,\n      name: \"inputPassword\",\n      className: \"white-text\",\n      label: \"Your password\",\n      value: this.state.inputPassword,\n      type: \"password\",\n      icon: \"lock\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      required: true,\n      name: \"inputFirstName\",\n      className: \"white-text\",\n      value: this.state.inputFirstName,\n      label: \"Your first name\",\n      type: \"text\",\n      icon: \"user\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      required: true,\n      name: \"inputLastName\",\n      className: \"white-text\",\n      label: \"Your last name\",\n      value: this.state.inputLastName,\n      type: \"text\",\n      icon: \"id-card\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"indigo\",\n      onClick: this.handleNextBtn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Next\"))), this.state.currentStep === 1 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex align-items-center mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"cc-visa\",\n      size: \"3x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      className: \"d-flex w-auto position-relative\",\n      required: true,\n      name: \"inputCardType\",\n      type: \"radio\",\n      id: \"Visa\",\n      containerClass: \"mx-2\",\n      value: this.state.inputCardType,\n      checked: this.state.inputCardType === \"visa\",\n      onClick: this.handleRadioBtn(\"visa\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"cc-mastercard\",\n      size: \"3x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      className: \"d-flex w-auto position-relative\",\n      name: \"inputCardType\",\n      type: \"radio\",\n      id: \"MasterCard\",\n      containerClass: \"mx-2\",\n      value: this.state.inputCardType,\n      checked: this.state.inputCardType === \"master_card\",\n      onClick: this.handleRadioBtn(\"master_card\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"cc-jcb\",\n      size: \"3x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      className: \"d-flex w-auto position-relative\",\n      name: \"inputCardType\",\n      type: \"radio\",\n      id: \"JCB\",\n      containerClass: \"mx-2\",\n      value: this.state.inputCardType,\n      checked: this.state.inputCardType === \"jcb\",\n      onClick: this.handleRadioBtn(\"jcb\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"cc-amex\",\n      size: \"3x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      className: \"d-flex w-auto position-relative\",\n      name: \"inputCardType\",\n      type: \"radio\",\n      id: \"American Express\",\n      containerClass: \"mx-2\",\n      value: this.state.inputCardType,\n      checked: this.state.inputCardType === \"american_express\",\n      onClick: this.handleRadioBtn(\"american_express\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })), React.createElement(MDBInput, {\n      required: true,\n      name: \"inputExpirationDate\",\n      className: \"white-text\",\n      label: \"Expiration Date\",\n      value: this.state.inputExpirationDate,\n      type: \"month\",\n      icon: \"credit-card\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      required: true,\n      name: \"inputCVC\",\n      className: \"white-text\",\n      label: \"Card Validation Code (4 digits)\",\n      value: this.state.inputCVC,\n      type: \"number\",\n      icon: \"shield-alt\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"indigo\",\n      onClick: this.handlePrvsBtn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Previous\"), React.createElement(MDBBtn, {\n      color: \"indigo\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Create your account\"), this.state.redirect && React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    })))))))));\n  }\n\n}\n\nexport default RegisterForm;","map":{"version":3,"sources":["D:\\Documents\\GitHub\\Projet-React\\ece_watermelon\\src\\Components\\Forms\\RegisterForm.js"],"names":["React","Redirect","MDBCard","MDBCardBody","MDBContainer","MDBAlert","MDBInput","MDBBtn","MDBIcon","MDBMask","MDBView","Stepper","background","loginUser","RegisterForm","Component","constructor","props","handleRadioBtn","argCard","setState","inputCardType","state","currentStep","steps","title","onClick","handleStepperClick","inputEmail","inputPassword","inputFirstName","inputLastName","inputCVC","inputExpirationDate","redirect","alert_invisible","handleNextBtn","bind","handlePrvsBtn","handleSubmit","handleInputChange","event","target","name","value","stepClick","preventDefault","length","match","console","log","users","JSON","parse","localStorage","getItem","cards","newIdUser","newIdCard","push","id","first_name","last_name","email","password","isAdmin","setItem","stringify","last_4","brand","expired_at","user_id","render","backgroundRepeat","width","backgroundColor"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport {Redirect} from \"react-router-dom\"\r\nimport {\r\n  MDBCard, MDBCardBody, MDBContainer, MDBAlert, MDBInput,\r\n  MDBBtn, MDBIcon, MDBMask, MDBView\r\n} from 'mdbreact';\r\nimport Stepper from 'react-stepper-horizontal';\r\nimport background from '../../Pictures/forms_background.jpg';\r\nimport loginUser from '../../Database/DatabaseSession.js';\r\n\r\nclass RegisterForm extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentStep: 0,\r\n      steps: [{ title: 'Personal Informations', onClick: () => {\r\n        this.handleStepperClick(0);\r\n      } \r\n    },\r\n      { title: 'Payment Infos', onClick: () => {\r\n        this.handleStepperClick(1);\r\n      } \r\n    }],\r\n      inputEmail: \"\",\r\n      inputPassword: \"\",\r\n      inputFirstName: \"\",\r\n      inputLastName: \"\",\r\n      inputCardType: \"\",\r\n      inputCVC: \"\",\r\n      inputExpirationDate: \"\",\r\n      redirect: false,\r\n      alert_invisible: true\r\n    };\r\n    this.handleNextBtn = this.handleNextBtn.bind(this);\r\n    this.handlePrvsBtn = this.handlePrvsBtn.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleRadioBtn = this.handleRadioBtn.bind(this);\r\n  }\r\n\r\n  handleNextBtn() {\r\n    this.setState({\r\n      currentStep: this.state.currentStep + 1,\r\n    });\r\n  }\r\n\r\n  handlePrvsBtn() {\r\n    this.setState({\r\n      currentStep: this.state.currentStep - 1,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * retrieve users input in form\r\n   */\r\n  handleInputChange(event) {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleRadioBtn = (argCard) => () => {\r\n    this.setState({\r\n      inputCardType: argCard\r\n    });\r\n  }\r\n\r\n  handleStepperClick(stepClick) {\r\n    this.setState({\r\n      currentStep: stepClick\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    if(this.state.inputCVC.length === 4 &&\r\n      this.state.inputEmail.match(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)){\r\n      console.log(this.state.inputCVC + \"\" + this.state.inputExpirationDate + \"\" + this.state.inputLastName+ \"\"+this.state.inputCardType);\r\n      let users = JSON.parse(localStorage.getItem(\"users\"));\r\n      let cards = JSON.parse(localStorage.getItem(\"cards\"));\r\n      let newIdUser = users.length+1;\r\n      let newIdCard = cards.length+1;\r\n      users.push({ id: newIdUser,\r\n        first_name: this.state.inputFirstName,\r\n        last_name: this.state.inputLastName,\r\n        email: this.state.inputEmail,\r\n        password: this.state.inputPassword,\r\n        isAdmin: false\r\n      });\r\n      localStorage.setItem(\"users\", JSON.stringify(users));\r\n      cards.push({ id: newIdCard,\r\n        last_4: this.state.inputCVC,\r\n        brand: this.state.inputCardType,\r\n        expired_at: this.state.inputExpirationDate + \"-01\",\r\n        user_id: newIdUser\r\n      });\r\n      localStorage.setItem(\"cards\", JSON.stringify(cards));\r\n      loginUser(this.state.inputEmail, this.state.inputPassword);\r\n      this.setState({\r\n        redirect: true\r\n      });\r\n    }\r\n      else{\r\n        this.setState({\r\n          alert_invisible: false\r\n        });\r\n      }\r\n    }\r\n\r\n  render() {\r\n    return (\r\n      <MDBView>\r\n        <img src={background} alt=\"\" style={{ backgroundRepeat: \"cover\", width:\"100vw\" }} />\r\n        <MDBMask overlay=\"black-light\">\r\n          <MDBContainer className=\"d-flex flex-column align-items-center\">\r\n                {this.state.alert_invisible ? <div className=\"invisible\"></div> : <div className=\"visible mt-3\">\r\n                  <MDBAlert color=\"danger\" dismiss>There are some errors in your sign up form!</MDBAlert>\r\n                </div>}\r\n                <MDBCard className=\"mt-3\" style={{ backgroundColor: \"rgba(150,150,150,0.3)\" }}>\r\n                  <MDBCardBody className=\"white-text\">\r\n                    <form className=\"white-text\" onSubmit={this.handleSubmit}>\r\n                      <p className=\"h3 text-center mt-3\">Sign up</p>\r\n                      <hr className=\"hr-light\" />\r\n                      <Stepper steps={this.state.steps} activeStep={this.state.currentStep} defaultTitleColor={\"ffffff\"} activeTitleColor={\"#5096FF\"} />\r\n                      \r\n                      {this.state.currentStep === 0 &&\r\n                        <div>\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputEmail\"\r\n                            className=\"white-text\"\r\n                            value={this.state.inputEmail}\r\n                            label=\"Your email\"\r\n                            type=\"email\"\r\n                            icon=\"envelope\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputPassword\"\r\n                            className=\"white-text\"\r\n                            label=\"Your password\"\r\n                            value={this.state.inputPassword}\r\n                            type=\"password\"\r\n                            icon=\"lock\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputFirstName\"\r\n                            className=\"white-text\"\r\n                            value={this.state.inputFirstName}\r\n                            label=\"Your first name\"\r\n                            type=\"text\"\r\n                            icon=\"user\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputLastName\"\r\n                            className=\"white-text\"\r\n                            label=\"Your last name\"\r\n                            value={this.state.inputLastName}\r\n                            type=\"text\"\r\n                            icon=\"id-card\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <div>\r\n                            <MDBBtn color=\"indigo\" onClick={this.handleNextBtn}>Next</MDBBtn>\r\n                          </div>\r\n                        </div>\r\n                      }\r\n\r\n                      {this.state.currentStep === 1 &&\r\n                        <div>\r\n                          <div className=\"d-flex align-items-center mt-3\">\r\n                            <MDBIcon fab icon=\"cc-visa\" size=\"3x\" />\r\n                            <MDBInput\r\n                            className=\"d-flex w-auto position-relative\"\r\n                              required\r\n                              name=\"inputCardType\"\r\n                              type='radio'\r\n                              id='Visa'\r\n                              containerClass='mx-2'\r\n                              value={this.state.inputCardType}\r\n                              checked={this.state.inputCardType === \"visa\"}\r\n                              onClick={this.handleRadioBtn(\"visa\")}\r\n                            />\r\n                            <MDBIcon fab icon=\"cc-mastercard\" size=\"3x\" />\r\n                            <MDBInput\r\n                            className=\"d-flex w-auto position-relative\"\r\n                              name=\"inputCardType\"\r\n                              type='radio'\r\n                              id='MasterCard'\r\n                              containerClass='mx-2'\r\n                              value={this.state.inputCardType}\r\n                              checked={this.state.inputCardType === \"master_card\"}\r\n                              onClick={this.handleRadioBtn(\"master_card\")}\r\n                            />\r\n                            <MDBIcon fab icon=\"cc-jcb\" size=\"3x\" />\r\n                            <MDBInput\r\n                            className=\"d-flex w-auto position-relative\"\r\n                              name=\"inputCardType\"\r\n                              type='radio'\r\n                              id='JCB'\r\n                              containerClass='mx-2'\r\n                              value={this.state.inputCardType}\r\n                              checked={this.state.inputCardType === \"jcb\"}\r\n                              onClick={this.handleRadioBtn(\"jcb\")}\r\n                            />\r\n                            <MDBIcon fab icon=\"cc-amex\" size=\"3x\" />\r\n                            <MDBInput\r\n                            className=\"d-flex w-auto position-relative\"\r\n                              name=\"inputCardType\"\r\n                              type='radio'\r\n                              id='American Express'\r\n                              containerClass='mx-2'\r\n                              value={this.state.inputCardType}\r\n                              checked={this.state.inputCardType === \"american_express\"}\r\n                              onClick={this.handleRadioBtn(\"american_express\")}\r\n                            />\r\n                          </div>\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputExpirationDate\"\r\n                            className=\"white-text\"\r\n                            label=\"Expiration Date\"\r\n                            value={this.state.inputExpirationDate}\r\n                            type=\"month\"\r\n                            icon=\"credit-card\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <MDBInput\r\n                            required\r\n                            name=\"inputCVC\"\r\n                            className=\"white-text\"\r\n                            label=\"Card Validation Code (4 digits)\"\r\n                            value={this.state.inputCVC}\r\n                            type=\"number\"\r\n                            icon=\"shield-alt\"\r\n                            onChange={this.handleInputChange}\r\n                          />\r\n                          <div className=\"text-center\">\r\n                            <MDBBtn color=\"indigo\" onClick={this.handlePrvsBtn}>Previous</MDBBtn>\r\n                            <MDBBtn color=\"indigo\" type=\"submit\">Create your account</MDBBtn>\r\n                            {this.state.redirect && <Redirect to='/'/>}\r\n                          </div>\r\n                        </div>\r\n                      }\r\n\r\n                    </form>\r\n                  </MDBCardBody>\r\n                </MDBCard>\r\n          </MDBContainer>\r\n        </MDBMask>\r\n      </MDBView>\r\n    );\r\n  };\r\n}\r\n\r\nexport default RegisterForm;"]},"metadata":{},"sourceType":"module"}