{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\Projet-React\\\\ece_watermelon\\\\src\\\\Components\\\\TransferContent.js\";\nimport React from 'react';\nimport { MDBView, MDBMask, MDBContainer, MDBCard, MDBRow, MDBCol, MDBListGroupItem, MDBListGroup, MDBCardHeader, MDBCardTitle, MDBCardBody, MDBCardText, MDBBtn, MDBInput, MDBCardFooter } from 'mdbreact';\nimport wallet from '../Pictures/wallet.png';\nimport background from '../Pictures/backgroundmain.jpg';\nimport './style.css';\nimport { getWalletAmount } from '../Database/DatabaseWallet.js';\nimport TransferModal from '../Components/Utils/TransferModal.js';\n\nclass TransferContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchedUsers: '',\n      wallet: parseFloat(getWalletAmount()).toFixed(2),\n      transferAmount: '',\n      searchInput: '',\n      userSearch: false,\n      userSelected: null,\n      modalTransfer: false,\n      proceedTransfer: false\n    };\n    this.isActive = this.isActive.bind(this);\n    this.setSelectedUser = this.setSelectedUser.bind(this);\n    this.handleAmountInput = this.handleAmountInput.bind(this);\n    this.handleSearchInput = this.handleSearchInput.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.usersList = this.usersList.bind(this);\n  }\n  /**\r\n   * retrieve user input in transfer card\r\n   * @param {user input} event \r\n   */\n\n\n  handleAmountInput(event) {\n    this.setState({\n      transferAmount: event.target.value\n    });\n  }\n  /**\r\n   * retrieve user input in search bar\r\n   * @param {user input} event \r\n   */\n\n\n  handleSearchInput(event) {\n    this.setState({\n      searchInput: event.target.value\n    });\n  }\n  /**\r\n   * Used to set Transfer modal state to active\r\n   * Check that wallet value is a number > 0\r\n   */\n\n\n  openTransfer() {\n    this.setState({\n      transferAmount: parseFloat(this.state.transferAmount).toFixed(2)\n    });\n\n    if (parseFloat(this.state.transferAmount) > 0.0 && this.state.userSelected !== null) {\n      this.setState({\n        modalTransfer: true\n      });\n    }\n  }\n  /**\r\n   * Used to set Transfer modal state to normal\r\n   */\n\n\n  closeTransfer() {\n    this.setState({\n      modalTransfer: false,\n      wallet: getWalletAmount()\n    });\n  }\n  /**\r\n   * Return an array composed of users that match user search\r\n   * @param {user submit a search} event \r\n   */\n\n\n  handleSearch(event) {\n    event.preventDefault();\n    const dbUsers = JSON.parse(localStorage.getItem(\"users\"));\n    const lowerCasedInput = this.state.searchInput.toString().toLowerCase();\n    var matchedSearched = dbUsers.filter(user => {\n      const lowerCasedFN = user.first_name.toLowerCase();\n      const lowerCasedLN = user.last_name.toLowerCase();\n\n      if (lowerCasedFN.includes(lowerCasedInput) || lowerCasedLN.includes(lowerCasedInput)) {\n        return user;\n      } else {\n        return null;\n      }\n    });\n    this.setState({\n      userSearch: true,\n      searchedUsers: matchedSearched\n    });\n  }\n  /**\r\n   * Return active css props if the card id item used in render is the one of the state\r\n   * @param {user id of the list item} userID \r\n   */\n\n\n  isActive(userID) {\n    if (userID === this.state.userSelected) {\n      return 'active';\n    } else {\n      return 'hover';\n    }\n  }\n  /**\r\n   * Retrieve another user ID from user selection\r\n   * @param {user selection} userID \r\n   */\n\n\n  setSelectedUser(userID) {\n    this.setState({\n      userSelected: userID\n    });\n  }\n  /**\r\n   * Display users that match user search\r\n   */\n\n\n  usersList() {\n    return this.state.searchedUsers.map(user => React.createElement(MDBListGroupItem, {\n      key: user.id,\n      className: this.isActive(user.id),\n      onClick: () => this.setSelectedUser(user.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      style: {\n        fontSize: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, user.first_name, \" \", user.last_name))));\n  }\n\n  render() {\n    return React.createElement(MDBView, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: background,\n      alt: \"\",\n      style: {\n        backgroundRepeat: \"cover\",\n        width: \"100vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(MDBMask, {\n      overlay: \"black-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      style: {\n        marginBottom: '50px',\n        marginTop: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center white-text\",\n      style: {\n        fontSize: '40px',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Transfer Manager\")), React.createElement(MDBRow, {\n      className: \"text-align-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(MDBCol, {\n      md: \"6\",\n      style: {\n        paddingLeft: '5%',\n        paddingRight: '5%',\n        marginBottom: '100px',\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(MDBCard, {\n      className: \"text-center\",\n      style: {\n        backgroundColor: \"rgba(125,125,140,0.5)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(MDBCardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(MDBCardTitle, {\n      className: \"white-text\",\n      style: {\n        fontSize: '36px',\n        marginTop: '20px',\n        marginBottom: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"To who?\")), React.createElement(MDBCardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(MDBCardText, {\n      className: \"text-justify\",\n      style: {\n        fontSize: '18px',\n        color: \"#9e9e9e\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Select a friend to who you want to transfer your money. You will be debit from your current wallet according to the amount you want to transfer.\"), React.createElement(\"form\", {\n      onSubmit: this.handleSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      required: true,\n      className: \"form-control\",\n      type: \"text\",\n      placeholder: \"Search a user\",\n      onChange: this.handleSearchInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(MDBBtn, {\n      className: \"mt-3\",\n      gradient: \"near-moon\",\n      rounded: true,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Search\")))), this.state.userSearch && React.createElement(MDBCard, {\n      className: \"text-center mt-3\",\n      style: {\n        backgroundColor: \"rgba(125,125,140,0.5)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(MDBCardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(MDBCardTitle, {\n      className: \"white-text\",\n      style: {\n        fontSize: '36px',\n        marginTop: '20px',\n        marginBottom: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Search results\")), React.createElement(MDBCardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(MDBListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, this.usersList())))), React.createElement(MDBCol, {\n      style: {\n        paddingRight: '100px',\n        paddingLeft: '40px',\n        marginBottom: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(MDBRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(MDBCol, {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: wallet,\n      alt: \"\",\n      style: {\n        width: '100%',\n        maxWidth: '250px',\n        minWidth: '100px',\n        height: 'auto'\n      },\n      className: \"image-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(MDBCol, {\n      middle: true,\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"white-text\",\n      style: {\n        fontWeight: 'bold',\n        fontSize: '50px',\n        whiteSpace: 'nowrap'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Cash flow\"), React.createElement(\"h1\", {\n      className: \"white-text\",\n      style: {\n        fontSize: '60px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, this.state.wallet, \"\\u20AC\"))), React.createElement(MDBRow, {\n      style: {\n        paddingTop: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(MDBCol, {\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(MDBCard, {\n      className: \"text-center\",\n      style: {\n        marginLeft: '20px',\n        marginRight: '20px',\n        backgroundColor: \"rgba(125,125,140,0.5)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(MDBCardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(MDBCardTitle, {\n      className: \"white-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Transfer Amount\")), React.createElement(MDBCardBody, {\n      className: \"text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(MDBInput, {\n      className: \"white-text\",\n      label: \"Ex: 20.00\",\n      type: \"number\",\n      icon: \"euro-sign\",\n      value: this.state.transferAmount,\n      onChange: this.handleAmountInput,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    })), React.createElement(MDBCardFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      gradient: \"near-moon\",\n      onClick: () => this.openTransfer(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Proceed\"), React.createElement(TransferModal, {\n      toggled: this.state.modalTransfer,\n      close: () => this.closeTransfer(),\n      transfer: this.state.transferAmount,\n      selectedUser: this.state.userSelected,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })))))))));\n  }\n\n}\n\nexport default TransferContent;","map":{"version":3,"sources":["D:\\Documents\\GitHub\\Projet-React\\ece_watermelon\\src\\Components\\TransferContent.js"],"names":["React","MDBView","MDBMask","MDBContainer","MDBCard","MDBRow","MDBCol","MDBListGroupItem","MDBListGroup","MDBCardHeader","MDBCardTitle","MDBCardBody","MDBCardText","MDBBtn","MDBInput","MDBCardFooter","wallet","background","getWalletAmount","TransferModal","TransferContent","Component","constructor","props","state","searchedUsers","parseFloat","toFixed","transferAmount","searchInput","userSearch","userSelected","modalTransfer","proceedTransfer","isActive","bind","setSelectedUser","handleAmountInput","handleSearchInput","handleSearch","usersList","event","setState","target","value","openTransfer","closeTransfer","preventDefault","dbUsers","JSON","parse","localStorage","getItem","lowerCasedInput","toString","toLowerCase","matchedSearched","filter","user","lowerCasedFN","first_name","lowerCasedLN","last_name","includes","userID","map","id","fontSize","render","backgroundRepeat","width","marginBottom","marginTop","fontWeight","paddingLeft","paddingRight","backgroundColor","color","maxWidth","minWidth","height","whiteSpace","paddingTop","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n    MDBView, MDBMask, MDBContainer, MDBCard, MDBRow, MDBCol, MDBListGroupItem, MDBListGroup,\r\n    MDBCardHeader, MDBCardTitle, MDBCardBody, MDBCardText, MDBBtn, MDBInput, MDBCardFooter\r\n} from 'mdbreact'\r\nimport wallet from '../Pictures/wallet.png';\r\nimport background from '../Pictures/backgroundmain.jpg'\r\nimport './style.css';\r\nimport { getWalletAmount } from '../Database/DatabaseWallet.js';\r\nimport TransferModal from '../Components/Utils/TransferModal.js';\r\n\r\n\r\nclass TransferContent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            searchedUsers: '',\r\n            wallet: parseFloat(getWalletAmount()).toFixed(2),\r\n            transferAmount: '',\r\n            searchInput: '',\r\n            userSearch: false,\r\n            userSelected: null,\r\n            modalTransfer: false,\r\n            proceedTransfer: false\r\n        }\r\n        this.isActive=this.isActive.bind(this);\r\n        this.setSelectedUser = this.setSelectedUser.bind(this);\r\n        this.handleAmountInput=this.handleAmountInput.bind(this);\r\n        this.handleSearchInput=this.handleSearchInput.bind(this);\r\n        this.handleSearch=this.handleSearch.bind(this);\r\n        this.usersList=this.usersList.bind(this);\r\n    }\r\n\r\n    /**\r\n     * retrieve user input in transfer card\r\n     * @param {user input} event \r\n     */\r\n    handleAmountInput(event) {\r\n        this.setState({\r\n            transferAmount: event.target.value\r\n        })\r\n    }\r\n    \r\n    /**\r\n     * retrieve user input in search bar\r\n     * @param {user input} event \r\n     */\r\n    handleSearchInput(event){\r\n        this.setState({\r\n            searchInput: event.target.value\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Used to set Transfer modal state to active\r\n     * Check that wallet value is a number > 0\r\n     */\r\n    openTransfer(){\r\n        this.setState({\r\n            transferAmount: parseFloat(this.state.transferAmount).toFixed(2)\r\n        });\r\n        if (parseFloat(this.state.transferAmount) > 0.0 && this.state.userSelected !== null){\r\n            this.setState({\r\n                modalTransfer: true\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Used to set Transfer modal state to normal\r\n     */\r\n    closeTransfer() {\r\n        this.setState({\r\n            modalTransfer: false,\r\n            wallet: getWalletAmount()\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Return an array composed of users that match user search\r\n     * @param {user submit a search} event \r\n     */\r\n    handleSearch(event) {\r\n        event.preventDefault();\r\n        const dbUsers = JSON.parse(localStorage.getItem(\"users\"));\r\n        const lowerCasedInput = this.state.searchInput.toString().toLowerCase();\r\n        var matchedSearched = dbUsers.filter((user) => {\r\n            const lowerCasedFN = user.first_name.toLowerCase();\r\n            const lowerCasedLN = user.last_name.toLowerCase();\r\n            if(lowerCasedFN.includes(lowerCasedInput) || lowerCasedLN.includes(lowerCasedInput)){\r\n                return user;\r\n            }else{\r\n                return null;\r\n            }\r\n        });\r\n        this.setState({\r\n            \r\n            userSearch: true,\r\n            searchedUsers: matchedSearched\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Return active css props if the card id item used in render is the one of the state\r\n     * @param {user id of the list item} userID \r\n     */\r\n    isActive(userID) {\r\n        if (userID === this.state.userSelected) {\r\n            return 'active';\r\n        } else {\r\n            return 'hover';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Retrieve another user ID from user selection\r\n     * @param {user selection} userID \r\n     */\r\n    setSelectedUser(userID) {\r\n        this.setState({\r\n            userSelected: userID\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Display users that match user search\r\n     */\r\n    usersList(){\r\n        return this.state.searchedUsers.map((user) =>\r\n        <MDBListGroupItem key={user.id} className={this.isActive(user.id)} onClick={() => this.setSelectedUser(user.id)}>\r\n            <div>\r\n                <strong style={{ fontSize: '20px' }}>{user.first_name} {user.last_name}\r\n                </strong>\r\n            </div>\r\n        </MDBListGroupItem>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MDBView>\r\n                <img src={background} alt=\"\" style={{ backgroundRepeat: \"cover\", width:\"100vw\" }} />\r\n                <MDBMask overlay=\"black-light\">\r\n                    <MDBContainer style={{ marginBottom: '50px', marginTop: '50px' }}>\r\n                        <h1 className=\"text-center white-text\" style={{ fontSize: '40px', fontWeight: 'bold' }}>Transfer Manager</h1>\r\n                    </MDBContainer>\r\n                    <MDBRow className=\"text-align-center\">\r\n                        <MDBCol md=\"6\" style={{ paddingLeft: '5%', paddingRight: '5%', marginBottom: '100px', width: '100%' }}>\r\n                            <MDBCard className=\"text-center\" style={{ backgroundColor: \"rgba(125,125,140,0.5)\" }}>\r\n                                <MDBCardHeader>\r\n                                    <MDBCardTitle className=\"white-text\" style={{ fontSize: '36px', marginTop: '20px', marginBottom: '20px' }}>To who?</MDBCardTitle>\r\n                                </MDBCardHeader>\r\n                                <MDBCardBody>\r\n                                    <MDBCardText className=\"text-justify\" style={{ fontSize: '18px', color: \"#9e9e9e\" }}>\r\n                                        Select a friend to who you want to transfer your money. You will be debit from your current wallet according to the amount you want to transfer.\r\n                                    </MDBCardText>\r\n                                    <form onSubmit={this.handleSearch}>\r\n                                        <input required className=\"form-control\" type=\"text\" placeholder=\"Search a user\" onChange={this.handleSearchInput}/>\r\n                                        <MDBBtn className=\"mt-3\" gradient=\"near-moon\" rounded type=\"submit\">Search</MDBBtn>\r\n                                    </form>\r\n                                </MDBCardBody>\r\n                            </MDBCard>\r\n                            {this.state.userSearch && \r\n                            <MDBCard className=\"text-center mt-3\" style={{ backgroundColor: \"rgba(125,125,140,0.5)\" }}>\r\n                                <MDBCardHeader>\r\n                                    <MDBCardTitle className=\"white-text\" style={{ fontSize: '36px', marginTop: '20px', marginBottom: '20px' }}>Search results</MDBCardTitle>\r\n                                </MDBCardHeader>\r\n                                <MDBCardBody>\r\n                                    <MDBListGroup>\r\n                                        {this.usersList()}\r\n                                    </MDBListGroup>\r\n                                </MDBCardBody>\r\n                                </MDBCard>\r\n                            }\r\n                        </MDBCol>\r\n\r\n                        <MDBCol style={{ paddingRight: '100px', paddingLeft: '40px', marginBottom: '100px' }}>\r\n                            <MDBRow>\r\n                                <MDBCol className=\"text-center\">\r\n                                    <img src={wallet} alt=\"\" style={{ width: '100%', maxWidth: '250px', minWidth: '100px', height: 'auto' }} className=\"image-fluid\"></img>\r\n                                </MDBCol>\r\n                                <MDBCol middle className=\"text-center\">\r\n                                    <h1 className=\"white-text\" style={{ fontWeight: 'bold', fontSize: '50px', whiteSpace: 'nowrap' }}>Cash flow</h1>\r\n                                    <h1 className=\"white-text\" style={{ fontSize: '60px' }}>{this.state.wallet}â‚¬</h1>\r\n                                </MDBCol>\r\n                            </MDBRow>\r\n                            <MDBRow style={{ paddingTop: '50px' }}>\r\n                                <MDBCol className=\"d-flex\">\r\n                                    <MDBCard className=\"text-center\" style={{ marginLeft: '20px', marginRight: '20px', backgroundColor: \"rgba(125,125,140,0.5)\" }}>\r\n                                        <MDBCardHeader>\r\n                                            <MDBCardTitle className=\"white-text\">Transfer Amount</MDBCardTitle>\r\n                                        </MDBCardHeader>\r\n                                        <MDBCardBody className=\"text-left\">\r\n                                            <MDBInput className=\"white-text\" label=\"Ex: 20.00\" type=\"number\" icon=\"euro-sign\" value={this.state.transferAmount} onChange={this.handleAmountInput} required/>\r\n                                        </MDBCardBody>\r\n                                        <MDBCardFooter >\r\n                                            <MDBBtn gradient=\"near-moon\" onClick={() => this.openTransfer()}>Proceed</MDBBtn>\r\n                                            <TransferModal toggled={this.state.modalTransfer} close={() => this.closeTransfer()} transfer={this.state.transferAmount} selectedUser={this.state.userSelected}/>\r\n                                        </MDBCardFooter>\r\n                                    </MDBCard>\r\n                                </MDBCol>\r\n                            </MDBRow>\r\n                        </MDBCol>\r\n                    </MDBRow>\r\n                </MDBMask>\r\n            </MDBView>\r\n        );\r\n    };\r\n}\r\nexport default TransferContent;"]},"metadata":{},"sourceType":"module"}